import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as a}from"./index.DK-fsZOb.js";import{c as w,X as I}from"./x.C6d3hr84.js";import{a as P}from"./audio.CPerjQH8.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],R=w("pause",V);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],q=w("play",X);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],D=w("skip-back",B);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],U=w("skip-forward",H);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],F=w("volume-2",W);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],G=w("volume-x",K);function J({isOpen:p,onClose:b,tracks:i,albumTitle:N,currentTrackIndex:j=0,onTrackChange:u}){const[n,m]=a.useState(j),[c,l]=a.useState(!1),[v,g]=a.useState(0),[k,C]=a.useState(0),[h,z]=a.useState(1),[d,y]=a.useState(!1),x=a.useRef(null),r=i[n];a.useEffect(()=>{m(j)},[j]),a.useEffect(()=>{p&&l(!1)},[p]);const T=()=>{const t=n<i.length-1?n+1:0;m(t),u?.(t),l(!1)};a.useEffect(()=>{const t=x.current;if(!t||!r)return;const s=()=>{g(t.currentTime)},o=()=>{C(t.duration)},f=()=>{l(!1),T()};return t.addEventListener("timeupdate",s),t.addEventListener("loadedmetadata",o),t.addEventListener("ended",f),t.src=r.url,t.load(),g(0),C(0),()=>{t.removeEventListener("timeupdate",s),t.removeEventListener("loadedmetadata",o),t.removeEventListener("ended",f)}},[n,r]),a.useEffect(()=>{x.current&&(x.current.volume=d?0:h)},[h,d]);const L=()=>{const t=x.current;t&&(c?t.pause():t.play(),l(!c))},S=()=>{const t=n>0?n-1:i.length-1;m(t),u?.(t),l(!1)},_=t=>{const s=x.current;if(!s)return;const o=t.currentTarget.getBoundingClientRect(),f=t.clientX-o.left,A=o.width,E=f/A*k;s.currentTime=E,g(E)},$=t=>{const s=t.currentTarget.getBoundingClientRect(),o=t.clientX-s.left,f=s.width,A=Math.max(0,Math.min(1,o/f));z(A),y(!1)},M=t=>{const s=Math.floor(t/60),o=Math.floor(t%60);return`${s}:${o.toString().padStart(2,"0")}`};return!p||!r?null:e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true","aria-labelledby":"audio-modal-title","aria-describedby":"audio-modal-description",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:b,"aria-hidden":"true"}),e.jsxs("div",{className:"relative w-full max-w-2xl bg-black/90 backdrop-blur-2xl border border-white/10 rounded-2xl p-4 sm:p-6 lg:p-8 mx-4 sm:mx-6",children:[e.jsx("audio",{ref:x,preload:"metadata"}),e.jsxs("div",{className:"flex items-center justify-between mb-6 sm:mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{id:"audio-modal-title",className:"text-xl sm:text-2xl font-extralight tracking-wide text-white",children:N}),e.jsxs("p",{id:"audio-modal-description",className:"text-white/60 font-light text-xs sm:text-sm tracking-wide",children:[i.length," track",i.length!==1?"s":""]})]}),e.jsx("button",{onClick:b,className:"p-2 text-white/60 hover:text-white transition-colors duration-300 rounded-full hover:bg-white/10","aria-label":"Close audio player",children:e.jsx(I,{size:24})})]}),e.jsxs("div",{className:"flex items-center space-x-4 sm:space-x-6 mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-br from-gray-800 to-black rounded-xl flex items-center justify-center flex-shrink-0",children:r.cover?e.jsx("img",{src:r.cover,alt:r.title,className:"w-full h-full object-cover rounded-xl"}):e.jsx("div",{className:"text-white/60 text-2xl",children:"ðŸŽµ"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-white font-light text-base sm:text-lg tracking-wide truncate",children:r.title}),e.jsx("p",{className:"text-white/60 font-light text-xs sm:text-sm tracking-wide truncate",children:r.artist})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"w-full h-1 bg-white/20 rounded-full cursor-pointer group",onClick:_,children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-200 group-hover:bg-white/80",style:{width:`${k?v/k*100:0}%`}})}),e.jsxs("div",{className:"flex justify-between text-white/60 text-xs font-light mt-2",children:[e.jsx("span",{children:M(v)}),e.jsx("span",{children:M(k)})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("button",{onClick:S,className:"p-2 text-white/60 hover:text-white transition-colors duration-300","aria-label":"Previous track",children:e.jsx(D,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:L,className:"w-10 h-10 sm:w-12 sm:h-12 bg-white text-black rounded-full flex items-center justify-center hover:bg-white/90 transition-all duration-300","aria-label":c?"Pause track":"Play track",children:c?e.jsx(R,{size:18,className:"sm:w-5 sm:h-5"}):e.jsx(q,{size:18,className:"ml-0.5 sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:T,className:"p-2 text-white/60 hover:text-white transition-colors duration-300","aria-label":"Next track",children:e.jsx(U,{size:18,className:"sm:w-5 sm:h-5"})})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("button",{onClick:()=>y(!d),className:"p-2 text-white/60 hover:text-white transition-colors duration-300","aria-label":d?"Unmute audio":"Mute audio",children:d?e.jsx(G,{size:18,className:"sm:w-5 sm:h-5"}):e.jsx(F,{size:18,className:"sm:w-5 sm:h-5"})}),e.jsx("div",{className:"w-16 sm:w-20 h-1 bg-white/20 rounded-full cursor-pointer hover:bg-white/30 transition-colors duration-200",onClick:$,role:"slider","aria-label":"Volume control","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round((d?0:h)*100),tabIndex:0,onKeyDown:t=>{if(t.key==="ArrowLeft"||t.key==="ArrowRight"){t.preventDefault();const s=t.key==="ArrowLeft"?Math.max(0,h-.1):Math.min(1,h+.1);z(s),y(!1)}},children:e.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-200",style:{width:`${d?0:h*100}%`}})})]})]}),i.length>1&&e.jsxs("div",{className:"pt-6 border-t border-white/10",children:[e.jsx("h4",{className:"text-white/80 font-light text-sm tracking-wide mb-4 uppercase",children:"Track List"}),e.jsx("div",{className:"space-y-2",children:i.map((t,s)=>e.jsx("button",{onClick:()=>{m(s),u?.(s),l(!1)},className:`w-full text-left p-3 rounded-lg transition-all duration-300 ${s===n?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-light text-sm tracking-wide",children:t.title}),e.jsx("p",{className:"text-xs text-white/50",children:t.artist})]}),e.jsx("span",{className:"text-xs text-white/50",children:M(t.duration)})]})},t.id))})]})]})]})}function ee(){const[p,b]=a.useState(!1),[i,N]=a.useState(null),[j,u]=a.useState(0);a.useEffect(()=>{const c=l=>{const v=l?P.find(g=>g.id===l):P[0];v&&(N(v),u(0),b(!0))};return window.openAudioPlayer=c,()=>{delete window.openAudioPlayer}},[]);const n=()=>{b(!1)},m=c=>{u(c)};return i?e.jsx(J,{isOpen:p,onClose:n,tracks:i.tracks,albumTitle:i.title,currentTrackIndex:j,onTrackChange:m}):null}export{ee as default};
